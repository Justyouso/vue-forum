(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3787addc"],{5917:function(t,e,a){},a6a5:function(t,e,a){"use strict";var s=a("5917"),o=a.n(s);o.a},aca9:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"follow-content"},[[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"关注用户",name:"first"}},[a("div",{staticClass:"author-list"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.followData,"show-header":!1}},[a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"follow"},[a("div",{staticClass:"fol-left pull-left"},[a("div",{staticClass:"title"},[a("router-link",{attrs:{tag:"a",to:{path:"/userIndex/"+e.row.id,query:{type:1}},target:"_blank"}},[t._v(" "+t._s(e.row.name)+" ")])],1),a("div",{staticClass:"icon-list"},[a("div",{staticClass:"first meta-bolck pull-left"},[t._v(" 关注 "+t._s(e.row.followed)+" ")]),a("div",{staticClass:"meta-bolck pull-left"},[t._v(" 粉丝 "+t._s(e.row.fans)+" ")]),a("div",{staticClass:"meta-bolck pull-left"},[a("router-link",{attrs:{tag:"a",to:"/userIndexFollow/"}},[t._v("文章 "+t._s(e.row.articles))])],1)])]),a("div",{staticClass:"fol-right pull-right"},[a("el-button",{class:e.row.is_followed?"el-icon-close":"el-icon-plus",attrs:{"native-type":"button",size:"medium",type:e.row.is_followed?"":"success",round:""},on:{click:function(a){return t.followed(e.$index,e.row)}}},[t._v(t._s(e.row.is_followed?"取消关注":"关注"))])],1)])]}}])})],1)]],2)]),a("el-tab-pane",{attrs:{label:"粉丝",name:"second"}},[a("div",{staticClass:"author-list"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.followData,"show-header":!1}},[a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"follow"},[a("div",{staticClass:"fol-left pull-left"},[a("div",{staticClass:"title"},[a("router-link",{attrs:{tag:"a",to:{path:"/userIndex/"+e.row.id,query:{type:1}},target:"_blank"}},[t._v(" "+t._s(e.row.name)+" ")])],1),a("div",{staticClass:"icon-list"},[a("div",{staticClass:"first meta-bolck pull-left"},[t._v(" 关注 "+t._s(e.row.followed)+" ")]),a("div",{staticClass:"meta-bolck pull-left"},[t._v(" 粉丝 "+t._s(e.row.fans)+" ")]),a("div",{staticClass:"meta-bolck pull-left"},[a("router-link",{attrs:{tag:"a",to:"/userIndexFollow/"}},[t._v("文章 "+t._s(e.row.articles))])],1)])]),a("div",{staticClass:"fol-right pull-right"},[a("el-button",{class:e.row.is_followed?"el-icon-close":"el-icon-plus",attrs:{"native-type":"button",size:"medium",type:e.row.is_followed?"":"success",round:""},on:{click:function(a){return t.followed(e.$index,e.row)}}},[t._v(t._s(e.row.is_followed?"取消关注":"关注"))])],1)])]}}])})],1)]],2)])],1)]],2)},o=[],l=a("c24f"),i={name:"userFollow",props:{active:String,default:"followed"},data:function(){return{authorId:this.$route.params.userId,activeName:this.active,followData:[]}},methods:{initData:function(){this.getUserInfo(),console.log(this.activeName)},getUserInfo:function(){this.userInfo=this.$store.state.userInfo,this.islive=this.$store.state.isLive,this.authorId=this.$route.params.userId,"first"==this.activeName?this.getFollowData(this.authorId,"followed"):this.getFollowData(this.authorId,"fans")},authorClick:function(t){this.$router.push({name:"UserIndex",params:{userId:t},query:{type:1}})},handleClick:function(t,e){"关注用户"==t.label?this.getFollowData(this.authorId,"followed"):this.getFollowData(this.authorId,"fans")},getFollowData:function(t,e){var a=this,s={author_id:t,type:e,user:this.userInfo.uid};Object(l["c"])(s).then((function(t){a.followData=t.data.data})).catch((function(t){console.log(t)}))},followed:function(t,e){var a=this;if(this.checkUser()){var s={user:this.userInfo.uid,author:e.id};s.type=e.is_followed?0:1,Object(l["a"])(s).then((function(s){e.is_followed=!e.is_followed,a.$set(a.followData,t,e)})).catch((function(t){console.log(t)}))}},checkUser:function(){if(this.islive)return!0;this.$router.push({name:"Login"})}},created:function(){this.initData()},watch:{active:{handler:function(t){this.activeName=t,"first"==this.activeName?this.getFollowData(this.authorId,"followed"):this.getFollowData(this.authorId,"fans")}}}},n=i,r=(a("a6a5"),a("2877")),u=Object(r["a"])(n,s,o,!1,null,"1ddc0903",null);e["default"]=u.exports},c24f:function(t,e,a){"use strict";a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n}));var s=a("b775");function o(t){return s["a"].request({method:"get",url:"/user/new/list",params:t})}function l(t){return s["a"].request({method:"get",url:"/user/follow",params:t})}function i(t){return s["a"].request({method:"get",url:"/user/index/".concat(t)})}function n(t){return s["a"].request({method:"get",url:"/user/index/follows/".concat(t.author_id),params:t})}}}]);