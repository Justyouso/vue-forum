(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afcdd6a4"],{d841:function(t,a,e){"use strict";var o=e("d8df"),s=e.n(o);s.a},d8df:function(t,a,e){},f4c5:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"new"},[e("div",{staticClass:"article-list"},[[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.articleData,stripe:"","show-header":!1}},[e("div",[e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{staticClass:"title",attrs:{tag:"a",to:"/article/detail/"+a.row.id,target:"_blank"}},[t._v(t._s(a.row.title))]),e("p",[t._v(t._s(a.row.summary))]),e("div",{staticClass:"article-table-bottom"},[e("router-link",{staticClass:"author-box",attrs:{tag:"a",to:"/userIndex/"+a.row.author_id}},[t._v(t._s(a.row.author))]),e("svg-icon",{attrs:{iconClass:"read",className:"read"}}),e("span",{staticClass:"author-box"},[t._v(t._s(a.row.read))]),e("svg-icon",{attrs:{iconClass:"like",className:"like"}}),e("span",{staticClass:"author-box"},[t._v(t._s(a.row.comments))])],1)]}}])})],1)])]],2),e("div",{staticClass:"author-list"},[[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.authorLabel,"show-header":!1}},[e("div",{staticClass:"author-label"},[e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(a.row.label)+" "),e("el-button",{staticClass:"pull-right icon-like",attrs:{type:"text"},on:{click:function(a){return t.changeAuthor()}}},[e("div",{class:[t.rotate?"el-icon-refresh rotate-start":"el-icon-refresh rotate-end"]}),e("div",{staticClass:"pull-right"},[t._v(t._s(a.row.operation))])]),e("el-button",{staticClass:"author-wrap",attrs:{type:"text"}},[t._v(t._s(a.row.username))])]}}])})],1)])],[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.authorData,"show-header":!1}},[e("div",[e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(a){return[e("router-link",{staticClass:"author-wrap",attrs:{tag:"a",to:"/userIndex/"+a.row.id}},[t._v(t._s(a.row.username))]),a.row.follow?e("el-button",{staticClass:"pull-right icon-like el-icon-close",attrs:{type:"text"},on:{click:function(e){return t.followed(a.$index,a.row)}}},[t._v("取消关注")]):e("el-button",{staticClass:"pull-right icon-like el-icon-plus",attrs:{type:"text"},on:{click:function(e){return t.followed(a.$index,a.row)}}},[t._v("关注")]),e("p",[t._v("写了"+t._s(a.row.article)+"篇文章 • "+t._s(a.row.followed)+"关注")])]}}])})],1)])]],2),t.wordCloudData.length?e("div",{staticClass:"word-cloud"},[e("wordCloud",{attrs:{data:t.wordCloudData,"size-range":[10,30]}})],1):t._e()])},s=[],i=e("05d5"),r=e("2423"),n=e("c24f"),l={name:"New",components:{wordCloud:i["a"]},data:function(){return{articleData:[],authorData:[],follow:!0,authorLabel:[{label:"推荐作者",operation:"换一批"}],rotate:!1,pageInfo:{},wordCloudData:[]}},methods:{initData:function(){this.getArticles(),this.getWordCloud(),this.getUserInfo(),this.getAuthors(1,5)},getWordCloud:function(){var t=this,a={};Object(r["g"])(a).then((function(a){t.wordCloudData=a.data.data})).catch((function(t){console.log(t)}))},getArticles:function(){var t=this,a={};Object(r["e"])(a).then((function(a){t.articleData=a.data.data})).catch((function(t){console.log(t)}))},getAuthors:function(t,a){var e=this,o={page:t,per_page:a,user:this.userinfo.uid};Object(n["e"])(o).then((function(t){e.authorData=t.data.data,e.pageInfo=t.data.pageInfo})).catch((function(t){console.log(t)}))},followed:function(t,a){var e=this;if(this.checkUser()){var o={user:this.userinfo.uid,author:a.id};o.type=a.follow?0:1,Object(n["a"])(o).then((function(o){a.follow=!a.follow,e.$set(e.authorData,t,a)})).catch((function(t){console.log(t)}))}},checkUser:function(){if(this.islive)return!0;this.$router.push({name:"Login"})},getUserInfo:function(){this.userinfo=this.$store.state.userInfo,this.islive=this.$store.state.isLive},changeAuthor:function(){this.rotate=!this.rotate,this.pageInfo.has_next?this.getAuthors(this.pageInfo.page+1,this.pageInfo.per_page):this.$message({message:"无更多数据",type:"warning"})}},created:function(){this.initData()}},c=l,u=(e("d841"),e("2877")),d=Object(u["a"])(c,o,s,!1,null,"04bc8907",null);a["default"]=d.exports}}]);