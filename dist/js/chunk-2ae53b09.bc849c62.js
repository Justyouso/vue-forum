(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ae53b09"],{"10be":function(t,e,r){},a5ad:function(t,e,r){"use strict";var o=r("10be"),s=r.n(o);s.a},d9c9:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"login"}},[r("div",{staticClass:"login-wrap"},[r("ul",{staticClass:"menu-tab"},t._l(t.menuTab,(function(e){return r("li",{key:e.id,class:{current:e.current},on:{click:function(r){return t.toggleMenu(e)}}},[t._v(t._s(e.txt))])})),0),r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,size:"medium"}},[r("el-form-item",{staticClass:"item-form",attrs:{prop:"email"}},[r("label",{attrs:{for:"email"}},[t._v("邮箱")]),r("el-input",{attrs:{id:"email",type:"text",autocomplete:"off"},model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"register"===t.model,expression:"model === 'register'"}],staticClass:"item-form",attrs:{prop:"username"}},[r("label",{attrs:{for:"username"}},[t._v("用户名")]),r("el-input",{attrs:{id:"username",type:"text",autocomplete:"off",minlength:"6",maxlength:"20"},model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),r("el-form-item",{staticClass:"item-form",attrs:{prop:"password"}},[r("label",{attrs:{for:"password"}},[t._v("密码")]),r("el-input",{attrs:{id:"password",type:"password",autocomplete:"off",minlength:"6",maxlength:"20"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"register"===t.model,expression:"model === 'register'"}],staticClass:"item-form",attrs:{prop:"passwords"}},[r("label",{attrs:{for:"passwords"}},[t._v("重复密码")]),r("el-input",{attrs:{id:"passwords",type:"password",autocomplete:"off",minlength:"6",maxlength:"20"},model:{value:t.ruleForm.passwords,callback:function(e){t.$set(t.ruleForm,"passwords",e)},expression:"ruleForm.passwords"}})],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"register"===t.model,expression:"model === 'register'"}],staticClass:"item-form",attrs:{prop:"code"}},[r("label",{attrs:{for:"code"}},[t._v("验证码")]),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{span:15}},[r("el-input",{attrs:{id:"code"},model:{value:t.ruleForm.code,callback:function(e){t.$set(t.ruleForm,"code",e)},expression:"ruleForm.code"}})],1),r("el-col",{attrs:{span:9}},[r("el-button",{staticClass:"block",attrs:{type:"success",disabled:t.codeButtonStatus.status},on:{click:function(e){return t.getSms()}}},[t._v(t._s(t.codeButtonStatus.text))])],1)],1)],1),"login"===t.model?r("router-link",{staticStyle:{color:"white","font-size":"14px"},attrs:{to:"/pwd/edit"}},[t._v("忘记密码")]):t._e(),r("el-form-item",[r("el-button",{staticClass:"login-btn block",attrs:{type:"danger"},on:{click:function(e){return t.submitForm("loginForm")}}},[t._v(t._s("login"===t.model?"登录":"注册"))])],1)],1)],1)])},s=[],a=(r("4160"),r("159b"),r("6199"),r("7ded")),n=r("61f7"),i={name:"login",data:function(){var t=this,e=function(t,e,r){""===e?r(new Error("请输入邮箱")):Object(n["b"])(e,"email")?r():r(new Error("邮箱格式错误"))},r=function(e,r,o){if("login"==t.model&&o(),t.ruleForm.username=Object(n["a"])(r),r=Object(n["a"])(r),!r)return o(new Error("请输入用户名"));Object(n["b"])(r,"username")?o():o(new Error("密码为6至20位数字+字母"))},o=function(e,r,o){if(t.ruleForm.password=Object(n["a"])(r),r=Object(n["a"])(r),!r)return o(new Error("请输入密码"));Object(n["b"])(r,"pwd")?o():o(new Error("密码为6至20位数字+字母"))},s=function(e,r,o){if("login"==t.model&&o(),t.ruleForm.passwords=Object(n["a"])(r),r=Object(n["a"])(r),!r)return o(new Error("请输入密码"));r!=t.ruleForm.password?o(new Error("重复密码错误")):o()},a=function(e,r,o){"login"==t.model&&o(),t.ruleForm.code=Object(n["a"])(r),r=Object(n["a"])(r),""===r?o(new Error("请输入验证码")):Object(n["b"])(r,"code")?o():o(new Error("验证码格式错误"))};return{menuTab:[{txt:"登录",current:!1,type:"login"},{txt:"注册",current:!1,type:"register"}],model:"login",codeButtonStatus:{status:!1,text:"发送验证码"},ruleForm:{email:"",username:"",password:"",passwords:"",code:""},rules:{email:[{validator:e,trigger:"blur"}],username:[{validator:r,trigger:"blur"}],password:[{validator:o,trigger:"blur"}],passwords:[{validator:s,trigger:"blur"}],code:[{validator:a,trigger:"blur"}]},timer:null}},methods:{toggleMenu:function(t){this.menuTab.forEach((function(t){t.current=!1})),t.current=!0,this.model=t.type,this.resetForm(),this.clearCountDown()},resetForm:function(){this.$refs["loginForm"].resetFields()},updateCodeButtonStatus:function(t){this.codeButtonStatus.status=t.status,this.codeButtonStatus.text=t.text},getSms:function(){var t=this;if(""==this.ruleForm.email)return this.$message.error("邮箱不能为空!"),!1;if(!Object(n["b"])(this.ruleForm.email,"email"))return this.$message.error("邮箱格式错误!"),!1;this.updateCodeButtonStatus({status:!0,text:"发送中"});var e={email:this.ruleForm.email,module:this.model};Object(a["a"])(e).then((function(e){var r=e.data;t.$message({message:r.message,type:"success"}),t.countDown(60)})).catch((function(e){t.updateCodeButtonStatus({status:!1,text:"发送验证码"}),console.log(e)}))},countDown:function(t){var e=this;this.timer&&clearInterval(this.timer),this.timer=setInterval((function(){t--,0===t?(clearInterval(e.timer),e.updateCodeButtonStatus({status:!1,text:"重新发送"})):e.updateCodeButtonStatus({status:!0,text:"倒计时".concat(t,"秒")})}),1e3)},clearCountDown:function(){this.updateCodeButtonStatus({status:!1,text:"获取验证码"}),clearInterval(this.timer)},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;"login"===e.model?e.login():e.register()}))},login:function(){var t=this,e={email:this.ruleForm.email,password:this.ruleForm.password};Object(a["b"])(e).then((function(e){var r=e.data.data;t.$store.commit("SET_USERINFO",r),t.$store.commit("SET_ISLIVE",!0),t.clearCountDown(),t.$router.push({name:"IndexNew"})})).catch((function(t){console.log(t)}))},register:function(){var t=this,e={email:this.ruleForm.email,username:this.ruleForm.username,password:this.ruleForm.password,code:this.ruleForm.code,module:"register"};Object(a["d"])(e).then((function(e){t.clearCountDown()})).catch((function(t){}))}},created:function(){this.model="login",this.$route.query.model&&(this.model=this.$route.query.model)}},l=i,u=(r("a5ad"),r("2877")),m=Object(u["a"])(l,o,s,!1,null,"70d23d2a",null);e["default"]=m.exports}}]);